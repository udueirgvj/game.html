<!DOCTYPE html><html lang="ar">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Ù„Ø¹Ø¨Ø© Ø§Ù„ØµÙŠØ§Ø¯</title><style>
body{
    margin:0;
    overflow:hidden;
    background:#3cb043;
    touch-action:none;
}

/* Ø´Ø§Ø´Ø© Ø§Ù„Ù„Ø¹Ø¨Ø© */
canvas{
    display:block;
}

/* Ø¹ØµØ§ Ø§Ù„ØªØ­ÙƒÙ… */
#joystick{
    position:fixed;
    bottom:40px;
    left:40px;
    width:120px;
    height:120px;
    background:rgba(255,255,255,0.2);
    border-radius:50%;
}

#stick{
    position:absolute;
    left:35px;
    top:35px;
    width:50px;
    height:50px;
    background:white;
    border-radius:50%;
}
</style></head><body><canvas id="game"></canvas>

<div id="joystick">
    <div id="stick"></div>
</div><script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

/* Ø§Ù„Ù„Ø§Ø¹Ø¨ */
let player = {
    x: 300,
    y: 300,
    size: 40,
    speed: 3
};

/* Ø§Ù„ØºØ²Ø§Ù„ */
let deer = {
    x: 700,
    y: 400,
    size: 35
};

/* Ø§Ù„Ø¬ÙˆÙŠØ³ØªÙƒ */
const joystick = document.getElementById("joystick");
const stick = document.getElementById("stick");

let touchActive = false;
let dx = 0;
let dy = 0;

joystick.addEventListener("touchstart", e=>{
    touchActive = true;
});

joystick.addEventListener("touchmove", e=>{
    const rect = joystick.getBoundingClientRect();
    const touch = e.touches[0];

    let x = touch.clientX - rect.left - 60;
    let y = touch.clientY - rect.top - 60;

    const dist = Math.sqrt(x*x + y*y);
    const max = 40;

    if(dist > max){
        x = x/dist*max;
        y = y/dist*max;
    }

    stick.style.left = (x+60-25)+"px";
    stick.style.top = (y+60-25)+"px";

    dx = x/20;
    dy = y/20;
});

joystick.addEventListener("touchend", e=>{
    touchActive=false;
    dx=0; dy=0;
    stick.style.left="35px";
    stick.style.top="35px";
});

/* Ø­Ø±ÙƒØ© Ø§Ù„Ù„Ø§Ø¹Ø¨ */
function movePlayer(){
    player.x += dx;
    player.y += dy;
}

/* Ø§Ù„ØµÙŠØ¯ */
function checkHunt(){
    let dist = Math.hypot(player.x-deer.x, player.y-deer.y);
    if(dist<40){
        deer.x=Math.random()*canvas.width;
        deer.y=Math.random()*canvas.height;
        alert("ðŸ ØªÙ… ØµÙŠØ¯ Ø§Ù„Ø­ÙŠÙˆØ§Ù†!");
    }
}

/* Ø§Ù„Ø±Ø³Ù… */
function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);

    // Ø§Ù„Ù„Ø§Ø¹Ø¨
    ctx.fillStyle="blue";
    ctx.fillRect(player.x,player.y,player.size,player.size);

    // Ø§Ù„Ø­ÙŠÙˆØ§Ù†
    ctx.fillStyle="brown";
    ctx.fillRect(deer.x,deer.y,deer.size,deer.size);
}

function loop(){
    movePlayer();
    checkHunt();
    draw();
    requestAnimationFrame(loop);
}

loop();
</script></body>
</html>
